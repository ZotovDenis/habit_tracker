# *–ö—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç ¬´–ê—Ç–æ–º–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏¬ª*

![Python](https://img.shields.io/badge/Python-3.11-f8fc00?logo=python)
![Django](https://img.shields.io/badge/Django-4.2.6-0c730a?logo=django)
![Redis](https://img.shields.io/badge/Redis-5.0.1-red?logo=redis)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15.6-blue?logo=postgresql)
![Celery](https://img.shields.io/badge/Celery-5.3.4-green?logo=celery)
![DRF](https://img.shields.io/badge/DRF-3.14.0-0c730a?logo=django)
![JWT](https://img.shields.io/badge/JWT-2.8.0-silver?logo=jsonwebtokens)
![Requests](https://img.shields.io/badge/Requests-2.31.0-3d9ee3?logo=python)
![Eventlet](https://img.shields.io/badge/Eventlet-0.33.3-c44747?logo=eventbrite)

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:

–°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ –∏–ª–∏ –∏–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ–∑–≤–æ–ª–∏—Ç –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏.


## –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:

- –°–∫–∞—á–∞–π—Ç–µ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.


- –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ venv –∫–æ–º–∞–Ω–¥–æ–π:

__*python -m venv venv*__

- –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π:

__*venv\Scripts\activate.bat*__

- –î–ª—è Windows - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ WSL2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:

https://learn.microsoft.com/en-us/windows/wsl/install

- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π:

__*pip install -r requirements.txt*__

- –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:

__*python manage.py makemigrations*__

__*python manage.py migrate*__

- –°–æ–∑–¥–∞–π—Ç–µ –ë–∞–∑—É –î–∞–Ω–Ω—ã—Ö (–≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL). –í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–Ω–æ—Å–∏—Ç–µ –≤–∞—à username 
–≤ Telegram.


- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª '.env.sample'. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è, —Å–æ–∑–¥–∞–π—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Ñ–∞–π–ª '.env' –∏ –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ 
—Ç—É–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –≤ '.env.sample' —à–∞–±–ª–æ–Ω. 

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:
```ini
SECRET_KEY = 'your-personal-secret-key'
DEBUG = True/False

DATABASE_NAME = 'name_of_your_database'
DATABASE_USER = 'your_database_username'
DATABASE_PASSWORD = 'your_password_from_the_database'
DATABASE_HOST = '10.255.255.10'
DATABASE_PORT = 5432

TELEGRAM_URL_BOT = 'https://api.telegram.org/bot'
TELEGRAM_API_TOKEN = '111222356:QWE-RTY1234UiO-iD1r46OT4i'

CELERY_BROKER_URL = 'https://10.10.10.10:32/0'
CELERY_RESULT_BACKEND = 'https://10.10.10.00:32/0'
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å __Telegram__

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç–æ–º, –≤ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –∫–∞–∫–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å.

–î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º Telegram, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ä–∞—Å—Å—ã–ª–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ –≤ —á–∞—Ç–µ —Å–∞–º–æ–≥–æ –≥–ª–∞–≤–Ω–æ–≥–æ –±–æ—Ç–∞: [BotFather](https://t.me/BotFather).


- –î–∞–ª–µ–µ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –≤–∞–º –±—É–¥–µ—Ç –≤—ã–¥–∞–Ω —Ç–æ–∫–µ–Ω. –ï–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ 
—Ñ–∞–π–ª .env –≤ –ø–æ–ª–µ __TELEGRAM_API_TOKEN__. –¢–æ–∫–µ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –±–æ—Ç–æ–º –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ API Telegram-—Å–µ—Ä–≤–∏—Å–æ–≤.


----

- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª __*habit_tracker/habit_app/telegram.py*__ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –≤ Telegram-–±–æ—Ç–∞ –∏ 
–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–º–∞–Ω–¥—É __*/info*__. –í–Ω–µ—Å–∏—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π __*Chat_ID*__ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ –¥–ª—è —Ç–æ–≥–æ 
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –Ω–∞–∂–∏–º–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É __*/info*__.

## –†–∞–±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

- __–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ –ë–î –ü—Ä–∏–≤—ã—á–µ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.__ –°–æ–±–ª—é–¥–∞–π—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

  - –£ –ø—Ä–∏–≤—ã—á–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏ –∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è.
  - –£ –ø—Ä–∏—è—Ç–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –Ω–∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è, –Ω–∏ —Å–≤—è–∑–∞–Ω–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏.
  - –°–≤—è–∑–∞–Ω–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏—è—Ç–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∏.
  - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –±–æ–ª—å—à–µ 120 —Å–µ–∫—É–Ω–¥.
  - –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ —Ä–µ–∂–µ, —á–µ–º 1 —Ä–∞–∑ –≤ 7 –¥–Ω–µ–π.


- –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ WSL –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É:

`sudo service redis-server start`

- –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

`celery -A config worker -l INFO -P eventlet`

- –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

`celery -A config beat -l INFO`

- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å –∫–æ–º–∞–Ω–¥–æ–π:

*Windows:*
`python manage.py runserver`

*MacOS / Linux:*
`python3 manage.py runserver`

----

## –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∫–ª–∞–≤–∏—à `Ctrl+C` –≤ –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –≥–¥–µ –æ–Ω –±—ã–ª –∑–∞–ø—É—â–µ–Ω.

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã Celery —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Ctrl+C` –≤ –æ–∫–Ω–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã.

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ Redis –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É: `sudo service redis-server stop` –≤ –æ–∫–Ω–µ WSL.

----

## üêã Docker: –∑–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

`docker-compose up -d --build`

----

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

__–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏__ (Smoke tests) - 85%

__–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ__ (–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã): [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](http://127.0.0.1:8000/api/docs/)

–ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏ —Ç–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ 
__*habit_tracker/config/settings.py*__ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –∏ CSRF, –∞ –∏–º–µ–Ω–Ω–æ:

- CORS_ALLOWED_ORIGINS

- CSRF_TRUSTED_ORIGINS

- CORS_ALLOW_ALL_ORIGINS.